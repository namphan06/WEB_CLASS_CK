<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng nhập</title>
    <link rel="stylesheet" href="đk.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="box">
      <div id="header"></div>
      <div class="bck_header">
        <div class="head">
          <p style="cursor: context-menu">ĐĂNG NHẬP TÀI KHOẢN</p>
        </div>
        <div class="tl">
          <a href="../homepage/homepage.html">Trang chủ</a>
          <span
            ><b> <i class="fa-solid fa-chevron-right"></i> </b
          ></span>
          <a href="" style="color: #48cab2">Đăng nhập tài khoản </a>
        </div>
      </div>
      <div class="title"><p style="cursor: context-menu">ĐĂNG NHẬP</p></div>
      <form id="form">
        <div class="bx-input">
          <div class="input-box">
            <label for="">Email<sup style="color: red">*</sup></label>
            <input type="text" id="email" placeholder="Email" />
            <span id="email-error" style="color: red;"></span>
          </div>
          <div class="input-box">
            <label for="">Mật khẩu<sup style="color: red">*</sup></label>
            <input type="password" id="password" placeholder="Mật khẩu" />
            <span id="password-error" style="color: red;"></span>
          </div>
        </div>
        <div class="btn">
          <input type="submit" value="Đăng nhập" />
        </div>
      </form>
      <div class="lg">
        <span style="cursor: context-menu">Chưa có tài khoản, đăng ký </span
        ><a href="./singup.html" style="text-decoration: underline">tại đây</a>
      </div>
      <div class="lk">
        <p style="margin-bottom: 15px; cursor: context-menu">
          Hoặc đăng nhập bằng
        </p>
        <a href=""
          ><img
            src="https://bizweb.dktcdn.net/assets/admin/images/login/fb-btn.svg"
            alt=""
        /></a>
        <a href=""
          ><img
            src="https://bizweb.dktcdn.net/assets/admin/images/login/gp-btn.svg"
            alt=""
        /></a>
      </div>
      <div id="footer"></div>
      <!-- Validate -->
      <script>
        const email = document.getElementById('email')
        const password = document.getElementById('password')

        const email_error = document.getElementById('email-error')
        const password_error = document.getElementById('password-error')

        form.addEventListener('submit',(e)=>{
          e.preventDefault();


          let isValid=true;
          // if(password.value === '' || password.value == null){
          //   e.preventDefault();
          //   password_error.innerHTML = "Password is required";
          // }
          // if(password.value != '12345678'){
          //   e.preventDefault();
          //   password_error.innerHTML = "Password error";
          // }
          
          // else{
          //   password_error.innerHTML = "";
          // }
          if(email.value === '' || password.value === ''){
            alert("Vui lòng không để trống")
          }
          // if(email.value != 'ABC@gmail.com'){
          //   e.preventDefault();
          //   email_error.innerHTML = "Email error";
          // }
          
          else{
            password_error.innerHTML = "";
            const user = JSON.parse(localStorage.getItem(email.value));
            if(user.email === email.value && user.password === password.value){
              alert("Đăng nhập thành công")
              window.location.href = "../homepage/homepage.html";
            }else{
              alert("Đăng nhập thất bại")
            }
          }
          if (!isValid) {
      e.preventDefault();
    }
        })
      </script>
      <!-- menu & footer,header -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          function setupEventListeners() {
            const menuLink = document.querySelector(".menu a");
            const overlay = document.querySelector(".overlay");
            const sidebar = document.querySelector(".sidebar");
      
            if (menuLink && overlay && sidebar) {
              menuLink.addEventListener("click", function(event) {
                event.preventDefault(); // Ngăn chặn hành động mặc định của liên kết
                overlay.style.display = "block";
                sidebar.style.left = "0";
              });
      
              overlay.addEventListener("click", function() {
                overlay.style.display = "none";
                sidebar.style.left = "-28%";
              });
            }
          }
      
          // Hàm loadFile để tải file HTML vào phần tử có ID cụ thể
          function loadFile(filePath, elementId) {
            fetch(filePath)
              .then((response) => {
                if (!response.ok) {
                  throw new Error(
                    "Network response was not ok " + response.statusText
                  );
                }
                return response.text();
              })
              .then((data) => {
                document.getElementById(elementId).innerHTML = data;
                setupEventListeners(); // Đảm bảo sự kiện được thêm sau khi nội dung được tải
              })
              .catch((error) => {
                console.error(
                  "There was a problem with the fetch operation:",
                  error
                );
              });
          }
      
          // Tải header_footer.html vào phần tử có id là 'header'
          loadFile("../../Header $ Footer/header.html", "header");
      
          // Thêm file header_footer.css vào thẻ head của tài liệu
          const headerLink = document.createElement("link");
          headerLink.rel = "stylesheet";
          headerLink.href = "../../Header $ Footer/header.css";
          document.head.appendChild(headerLink);
      
          const headerScript = document.createElement("script");
          headerScript.src = "../../fd_js/header.js";
          document.head.appendChild(headerScript);
      
          // Tải header_footer.html vào phần tử có id là 'footer'
          loadFile("../../Header $ Footer/footer.html", "footer");
      
          const footerLink = document.createElement("link");
          footerLink.rel = "stylesheet";
          footerLink.href = "../../Header $ Footer/footer.css";
          document.head.appendChild(footerLink);






          
        });
      </script>
      <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
      
      </body>
    </html>